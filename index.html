<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title></title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1.0,minimum-scale=1.0" />
	<meta content="telephone=no" name="format-detection" />
	<link rel="stylesheet" type="text/css" href="css/common.css">
	<link rel="stylesheet" type="text/css" href="css/animate.min.css">
	<link rel="stylesheet" type="text/css" href="css/setmystyle.css">
</head>
<body>
	<div class="main">
    	<!--音乐开始-->
        <div id="music_box" class="m_act"></div>
        <!--音乐结束-->
        <!--加载开始-->
          <div class="loading" id="loading">
                <div class="circle"></div>
                <div class="circle1"></div>
          </div>
        <!--加载结束-->
        <!--按钮开始-->
		<i class="ud_box up_icon"></i>
        <!--按钮结束-->
		<div class="swiper-container" style="display:none">
			<div class="swiper-wrapper">
				<!--第一页开始-->
				<div class="swiper-slide page1">
				    <img src="images/page1-bg.jpg" alt="" class="p1show ani" swiper-animate-effect="p1Run" swiper-animate-duration="1.5s" swiper-animate-delay="0s">
				</div>
				<!--第一页结束-->
				<!--第二页开始-->
				<div class="swiper-slide page2">
				    <img src="images/p2-icon1.png" alt="" class="p2-window">
                    <div id="myvideo">
                        &nbsp;
                    </div>
				    <div class="p2-icons">
				    	<img src="images/p2-main.jpg" alt="" class="p2-main">
				    	<img src="images/p2-icon2.png" alt="" class="p2-icon2 ani" swiper-animate-effect="fadeInRight" swiper-animate-duration="1s" swiper-animate-delay="0.8s">
				    	<img src="images/p2-icon3.png" alt="" class="p2-icon3 ani" swiper-animate-effect="fadeInUp" swiper-animate-duration="1s" swiper-animate-delay="0s">
				    	<img src="images/p2-icon4.png" alt="" class="p2-icon4 ani" swiper-animate-effect="fadeInLeft" swiper-animate-duration="1s" swiper-animate-delay="1.6s">
				    </div>
				    <img src="images/p2-txt.png" alt="" class="p2-txt ani" swiper-animate-effect="bounceInDown" swiper-animate-duration="1.5s" swiper-animate-delay="2.2s">
				</div>
				<!--第二页结束-->
				<!--第三页开始-->
				<div class="swiper-slide page3">
				    <img src="images/p3-txt2.png" alt="" class="p3-txt2 ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="1s" swiper-animate-delay="0.5s">
				    <img src="images/p3-txt1.png" alt="" class="p3-txt1 ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="1s" swiper-animate-delay="0">
				    <img src="images/p3-icon01.png" alt="" class="p3-icon01 ani" swiper-animate-effect="bounceInDown" swiper-animate-duration="1s" swiper-animate-delay="1.2s">
				    <img src="images/p3-icon02.png" alt="" class="p3-icon02 ani" swiper-animate-effect="bounceInDown" swiper-animate-duration="1s" swiper-animate-delay="1.5s">
				    <img src="images/p3-icon03.png" alt="" class="p3-icon03 ani" swiper-animate-effect="bounceInDown" swiper-animate-duration="1s" swiper-animate-delay="1.8s">
				    <img src="images/p3-icon04.png" alt="" class="p3-icon04 ani" swiper-animate-effect="bounceInDown" swiper-animate-duration="1s" swiper-animate-delay="2.1s">
				    <img src="images/p3-icon05.png" alt="" class="p3-icon05 ani" swiper-animate-effect="bounceInDown" swiper-animate-duration="1s" swiper-animate-delay="2.4s">
				    <img src="images/p3-tit.png" alt="" class="p3-tit ani" swiper-animate-effect="bounceIn" swiper-animate-duration="1s" swiper-animate-delay="1s">
				</div>
				<!--第三页结束-->
				<!--第四页开始-->
				<div class="swiper-slide page4">
				    <img src="images/p4-tit.png" alt="" class="p4-tit">
				    <ul class="p4-btns cfx">
				    	<li class="ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="1s" swiper-animate-delay="0s">
				    		<img src="images/p4-icon01.png" alt="">
				    		<img src="images/curicon.png" alt="" class="cur">
				    	</li>
				    	<li class="ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="1s" swiper-animate-delay="0.5s">
				    		<img src="images/p4-icon02.png" alt="">
				    		<img src="images/curicon.png" alt="">
				    	</li>
				    	<li class="ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="1s" swiper-animate-delay="1s">
				    		<img src="images/p4-icon03.png" alt="">
				    		<img src="images/curicon.png" alt="">
				    	</li>
				    	<li class="ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="1s" swiper-animate-delay="1.5s">
				    		<img src="images/p4-icon04.png" alt="">
				    		<img src="images/curicon.png" alt="">
				    	</li>
				    	<li class="ani" swiper-animate-effect="fadeInDown" swiper-animate-duration="1s" swiper-animate-delay="2s">
				    		<img src="images/p4-icon05.png" alt="">
				    		<img src="images/curicon.png" alt="">
				    	</li>
				    </ul>
				    <div class="gamebox">
				    	<img src="images/p4-game.jpg" alt="" class="game-bg">
				    	<div class="gwc-icon">
				    		<img src="images/gwc-icon.png" alt="" class="gwc-bg">
				    		<img src="images/gwc-pic1.png" alt="" class="gwc-pic1">
				    		<img src="images/gwc-pic2.png" alt="" class="gwc-pic2">
				    		<img src="images/gwc-pic3.png" alt="" class="gwc-pic3">
				    		<img src="images/gwc-pic4.png" alt="" class="gwc-pic4">
				    		<img src="images/gwc-pic5.png" alt="" class="gwc-pic5">
				    	</div>
				    	<div class="clockbox">
				    		<img src="images/clock.png" alt="" class="clockbg">
				    		<img src="images/clock-run.png" alt="" class="clock-run">
				    		<span>制作中...</span>
				    	</div>
				    	<img src="images/start-btn.png" alt="" class="startbtn ani" swiper-animate-effect="fadeInRight" swiper-animate-duration="1s" swiper-animate-delay="2s">
				    	<img src="images/play-again.png" alt="" class="playagain ani" swiper-animate-effect="swing" swiper-animate-duration="1s" swiper-animate-delay="3s">
				    	<img src="images/niunaiguo.png" alt="" class="succ-show">
				    	<img src="images/caomei.png" alt="" hidden>
				    	<img src="images/pingguo.png" alt="" hidden>
				    	<img src="images/putao.png" alt="" hidden>
				    	<img src="images/xigua.png" alt="" hidden>
				    </div>
				</div>
				<!--第四页结束-->
				<!--第五页开始-->
				<div class="swiper-slide page5">
					<img src="images/code1.png" alt="" class="ani" swiper-animate-effect="rollIn" swiper-animate-duration="1s" swiper-animate-delay="0s">
					<img src="images/code2.png" alt="" class="ani" swiper-animate-effect="rollIn" swiper-animate-duration="1s" swiper-animate-delay="0.8s">
				</div>
				<!--第五页结束-->
			</div>
		</div>
	</div>
</div>
</body>
<script src="js/swiper3.1.0.min.js"></script>
<script src="js/swiper.animate1.0.2.min.js"></script>
<script>
window.onload = function(){
	bgmusic.play();
	document.getElementById('loading').style.display = 'none';
	document.querySelector('.swiper-container').style.display="block";
	var mySwiper = new Swiper ('.swiper-container', {
		direction : 'vertical',
		speed:500,
		 mousewheelControl: true,//能用鼠标滑轮滑动动画
		resistanceRatio : 0,
		onInit: function(swiper){
			swiperAnimateCache(swiper); 
			swiperAnimate(swiper);
		},
		onSlideChangeEnd: function(swiper){
			swiperAnimate(swiper); 
	      	if(swiper.activeIndex == document.querySelectorAll('.swiper-slide').length - 1){
	      		document.querySelector('.ud_box').classList.remove('up_icon');
	      		document.querySelector('.ud_box').classList.add('down_icon');
		    }else{
		    	document.querySelector('.ud_box').classList.remove('down_icon');
	      		document.querySelector('.ud_box').classList.add('up_icon');
		    }
		}
	});
	// game
	var arr1=['caomei','xigua','putao','pingguo','niunaiguo']
	var gameflog = true;
	var aLi = document.querySelector('.p4-btns').getElementsByTagName('li');
	var gwc = document.querySelector('.gwc-icon');
	var startBtn = document.querySelector('.startbtn');
	var playagain = document.querySelector('.playagain');
	var succShow = document.querySelector('.succ-show');
	var clockRun = document.querySelector('.clock-run');
	var clockTxt = document.querySelector('.clockbox span')
	var naixiType = [];
	oldIndex = 0;
	for(var i=0;i<aLi.length;i++){
		aLi[i].index = i;
		aLi[i].flog=true;
		aLi[i].addEventListener('click',function(){
			aLi[oldIndex].getElementsByTagName('img')[1].className = '';
			this.getElementsByTagName('img')[1].className = 'cur';
			oldIndex = this.index;
			if(this.flog){
				naixiType.push(arr1[this.index])
				this.flog=false;
				startMove(gwc,{'left':this.offsetLeft},function(){
					document.querySelector('.gwc-pic'+(oldIndex+1)).style.display='block';
				})
			}else{
				this.flog=true;
				naixiType.splice(arr1[this.index].indexOf(naixiType),1);
				startMove(gwc,{'left':this.offsetLeft},function(){
					document.querySelector('.gwc-pic'+(oldIndex+1)).style.display='none';
				})
			}
		},false);
	}
	startBtn.flog=true;
	startBtn.addEventListener('click',function(){
		if(startBtn.flog){
			if(naixiType.length==0){
				alert('巧妇难为无米之炊,呜呜~~')
			}else{
				clockRun.classList.add('run');
				clockTxt.style.visibility='visible';
				this.flog=false;
			}
		}
	},false);
	clockRun.addEventListener('webkitAnimationEnd',function(){
		succShow.src='images/'+naixiType[0]+'.png';
		succShow.style.visibility='visible';
		succShow.classList.add('show');
		clockTxt.style.visibility='hidden';
		clockRun.classList.remove('run');
	},false);
	playagain.addEventListener('click',function(){
		startBtn.flog=true;
		succShow.style.visibility='hidden';
		succShow.classList.remove('show');
		naixiType.length=0;
		for(i=0;i<aLi.length;i++){
			aLi[i].getElementsByTagName('img')[1].className='';
			aLi[i].flog=true;
		}
		aLi[0].getElementsByTagName('img')[1].className='cur';
		oldIndex=0;
		for(var i=0;i<gwc.getElementsByTagName('img').length-1;i++){
			document.querySelector('.gwc-pic'+(i+1)).style.display='none';
		};
		gwc.style.left="3%";
	},false)
}
//运动函数；
function startMove(obj,json,fnEnd){
	clearInterval(obj.timer);//清理定时器；
	obj.timer = setInterval(function(){
		var onoff = true;
		for(var attr in json){
			var cur = 0;
			if(attr == "opacity"){//判断是否为透明度，如果是使用parseFloat取小数；
				cur=Math.round(parseFloat(getStyle(obj, attr))*100);
			}else if(attr == "scroll"){//判断运动内容是否为滚动，是则取滚动条位置
				cur = document.documentElement.scrollTop||document.body.scrollTop;
			}else{//否则取整数
				cur = getStyle(obj,attr)=="auto"?0:parseInt(getStyle(obj,attr));//如果样式表里未添加该属性，则取值0；
			}
			var speed = (json[attr]-cur)/6;
			speed = speed>0?Math.ceil(speed):Math.floor(speed);//speed取整；
			if(cur!=json[attr]){
				onoff = false;
			}
			if(attr == "opacity"){//属性为“opacity”时，样式运动方式；
				obj.style.filter='alpha(opacity:'+(cur+speed)+')';
				obj.style.opacity=(cur+speed)/100;
			}else if(attr == "scroll"){
				
				window.scrollTo(0,cur + speed)
			}else{//其他样式运动方式；
				obj.style[attr] = cur + speed +"px";
			}
		}
		if(onoff){
			clearInterval(obj.timer);
			if(fnEnd){
				fnEnd();
			}
		}
	},30)
}
function getStyle(obj,name){
	if(obj.currentStyle){//IE；
		return obj.currentStyle[name];
	}else{//FF；
		return getComputedStyle(obj, false)[name];
	}
}
// 阻止ios默认拖动;
document.querySelector('body').addEventListener('touchmove',function(e){
	e.preventDefault();
},false);
//背景音乐 
var bgmusic = new Audio();
bgmusic.src = "images/music.mp3";
bgmusic.loop = true;//循环播放
bgmusic.autoplay = false;//是否自动播放
var flog = false;
var musicBtn = document.querySelector('#music_box');
musicBtn.addEventListener('click',function(){
	if(flog == false){
		this.className = ' ';
		bgmusic.pause();
		flog = true;
	}else{
		this.className = 'm_act';
		bgmusic.play();
		flog = false;
	}
},false)
</script>
<!-- 视频播放 -->
<!-- 引入腾讯视频播放器组件 -->
<script language="javascript" src="http://qzs.qq.com/tencentvideo_v1/js/tvp/tvp.player.js"
charset="utf-8">
</script>
<script language="javascript">
    //定义视频对象
    var video = new tvp.VideoInfo();
    //向视频对象传入视频vid
    video.setVid("c01677uo7l5");
    //定义播放器对象
    var player = new tvp.Player();
    //设置播放器初始化时加载的视频
    player.setCurVideo(video);
    //设置精简皮肤，仅点播有效
    //player.addParam("flashskin", "http://imgcache.qq.com/minivideo_v1/vd/res/skins/TencentPlayerMiniSkin.swf");
    //输出播放器,参数就是上面div的id，希望输出到哪个HTML元素里，就写哪个元素的id
    player.addParam("autoplay", "0");
    player.addParam("webkit-playsinline", "true")
    player.addParam("wmode", "transparent");
    //player.addParam("pic","http://img1.gtimg.com/ent/pics/hv1/75/182/1238/80547435.jpg");
    player.write("myvideo");
    var videoEle = document.querySelector('#myvideo video');
    videoEle.addEventListener('play',function(){
    	document.querySelector('#music_box').className = '';
      	bgmusic.pause();
    },false);
    videoEle.addEventListener('pause',function(){
    	if(flog == false){
	      	document.querySelector('#music_box').className = 'm_act';
    		bgmusic.play();
		}
    },false);
</script>
<!-- 统计代码 -->
<script>
document.write("<img src='http://hm.baidu.com/hm.gif?si=d29dd8c9b0e6869b8bec5a5649c3991e&amp;et=0&amp;nv=0&amp;st=4&amp;lt="+new Date().getTime()+"&amp;v=wap-0-0.2&amp;rnd=1107555598' width='0' height='0'/><br><img src='http://wappv.55bbs.com/images/wap3g.gif?t="+new Date().getTime()+"&ubcat=&vuserid=0&url="+window.location.href+"&ref=&ip_ck="+document.referrer+" height='0' width='0'>");
</script>
<!-- 微信分享 -->
<script>
var wx_title="55FashionTV《diy牛油果昔-你不知道的美食新宠》";
var wx_desc="55FashionTV《diy牛油果昔-你不知道的美食新宠》";
var wx_imgurl="http://topic.55bbs.com/topic/special/topic/20150922/images/share_pic.jpg";
var wx_shareurl=window.location.href;
</script>
<script src='http://res.wx.qq.com/open/js/jweixin-1.0.0.js'></script>
<script>
	document.write('<script src="http://topic.55bbs.com/api/ReturnJsCode.php?wx_shareurl='+encodeURIComponent(wx_shareurl)+'" type="text/javascript"><\/script>');
</script>
</html>